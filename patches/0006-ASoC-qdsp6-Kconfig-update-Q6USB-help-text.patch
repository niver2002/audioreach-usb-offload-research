From: USB Audio Offload Research <research@audioreach-usb-offload>
Date: Tue, 25 Feb 2026 00:00:00 +0000
Subject: [PATCH 6/6] ASoC: qdsp6: Kconfig: allow Q6USB without hard AFE
 dependency

Currently SND_SOC_QDSP6_USB has no explicit dependency on the AFE
subsystem, but q6usb.c implicitly requires it via #include "q6afe.h".
After the q6usb decoupling patch (patch 4/6), q6usb.c no longer
requires q6afe.h.

Update the Kconfig help text to clarify that Q6USB now works with
both APR/AFE and AudioReach/GPR stacks. Add a recommendation to
enable SND_SOC_QDSP6_APM_LPASS_DAI alongside Q6USB for AudioReach
platforms.

No functional Kconfig change is needed â€” the existing config already
compiles correctly after the q6usb.c decoupling. This patch only
updates documentation.

Signed-off-by: USB Audio Offload Research <research@audioreach-usb-offload>
---
 sound/soc/qcom/Kconfig | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/sound/soc/qcom/Kconfig b/sound/soc/qcom/Kconfig
index XXXXXXX..XXXXXXX 100644
--- a/sound/soc/qcom/Kconfig
+++ b/sound/soc/qcom/Kconfig
@@ -XXX,12 +XXX,16 @@ config SND_SOC_QDSP6_USB
     depends on SND_SOC_USB
     select AUXILIARY_BUS
     select SND_SOC_QCOM_OFFLOAD_UTILS

     help
       Adds support for USB offloading for QDSP6 ASoC
       based platform sound cards.  This will enable the
       Q6USB DPCM backend DAI link, which will interact
       with the SoC USB framework to initialize a session
       with active USB SND devices.
+
+      Works with both APR/AFE (q6afe) and AudioReach/GPR
+      (q6apm) audio stacks. For AudioReach platforms, also
+      enable SND_SOC_QDSP6_APM_LPASS_DAI.

--
2.43.0
