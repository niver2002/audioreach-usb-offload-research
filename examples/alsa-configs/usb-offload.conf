# ============================================
# ALSA UCM 配置 - USB Audio Offload
# ============================================
# Use Case Manager (UCM) 配置文件
# 用于自动配置 USB Audio Offload 设备
#
# 位置: /usr/share/alsa/ucm2/qcom/qcs6490/usb-offload.conf
#
# 使用方法:
#   alsaucm -c qcs6490 set _verb HiFi
#   alsaucm -c qcs6490 set _enadev Speaker

Syntax 4

# ============================================
# 声卡定义
# ============================================
SectionUseCase."HiFi" {
    File "HiFi.conf"
    Comment "高保真音频播放"
}

# ============================================
# HiFi 用例配置
# ============================================
SectionVerb {
    Value {
        TQ "HiFi"
    }
    
    EnableSequence [
        # 启用 USB offload 路由
        cset "name='USB Offload Switch' on"
        cset "name='USB Playback Volume' 80%"
    ]
    
    DisableSequence [
        # 禁用 USB offload 路由
        cset "name='USB Offload Switch' off"
    ]
}

# ============================================
# 设备定义 - USB 扬声器
# ============================================
SectionDevice."Speaker" {
    Comment "USB 音频输出"
    
    Value {
        PlaybackPCM "hw:${CardId},0"
        PlaybackChannels 2
        PlaybackPriority 100
    }
    
    EnableSequence [
        cset "name='USB Playback Switch' on"
        cset "name='USB Playback Volume' 80%"
    ]
    
    DisableSequence [
        cset "name='USB Playback Switch' off"
    ]
}

# ============================================
# 设备定义 - USB 麦克风
# ============================================
SectionDevice."Mic" {
    Comment "USB 音频输入"
    
    Value {
        CapturePCM "hw:${CardId},0"
        CaptureChannels 2
        CapturePriority 100
    }
    
    EnableSequence [
        cset "name='USB Capture Switch' on"
        cset "name='USB Capture Volume' 80%"
    ]
    
    DisableSequence [
        cset "name='USB Capture Switch' off"
    ]
}

# ============================================
# 修饰符 - 低延迟模式
# ============================================
SectionModifier."LowLatency" {
    Comment "低延迟音频模式"
    
    EnableSequence [
        cset "name='USB Offload Latency Mode' Low"
    ]
    
    DisableSequence [
        cset "name='USB Offload Latency Mode' Normal"
    ]
}

# ============================================
# 修饰符 - 高质量模式
# ============================================
SectionModifier."HighQuality" {
    Comment "高质量音频模式"
    
    EnableSequence [
        cset "name='USB Offload Quality Mode' High"
    ]
    
    DisableSequence [
        cset "name='USB Offload Quality Mode' Normal"
    ]
}

# ============================================
# 冲突定义
# ============================================
SectionDefaults [
    cdev "hw:qcs6490"
]

# ============================================
# 注释说明
# ============================================
# 1. 控制名称 (cset) 需要根据实际驱动调整
# 2. PCM 设备号需要根据系统配置修改
# 3. 音量值范围: 0-100%
# 4. 优先级值越高，优先级越高
